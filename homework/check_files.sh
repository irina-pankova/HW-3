#!/bin/bash
REPORT="report.txt"
echo "–û—Ç—á—ë—Ç –æ —Å–æ–¥–µ—Ä–∂–∏–º–æ–º –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏: $(pwd)" > "$REPORT"
echo "–î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –∑–∞–ø—É—Å–∫–∞: $(date)" >> "$REPORT"
echo "----------------------------------------" >> "$REPORT"
echo >> "$REPORT"
# --- 1. –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤ –∏ –∏—Ö —Ç–∏–ø–æ–≤ ---
echo "üìÇ –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:"
echo "üìÇ –°–ø–∏—Å–æ–∫ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏:" >> "$REPORT"
for item in *; do
    if [ -d "$item" ]; then
        echo "[–ö–∞—Ç–∞–ª–æ–≥] $item" | tee -a "$REPORT"
    elif [ -f "$item" ]; then
        echo "[–§–∞–π–ª] $item" | tee -a "$REPORT"
    elif [ -L "$item" ]; then
        echo "[–°–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞] $item" | tee -a "$REPORT"
    else
        echo "[–î—Ä—É–≥–æ–µ] $item" | tee -a "$REPORT"
    fi
done
echo >> "$REPORT"
echo

# --- 2. –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è —Ñ–∞–π–ª–∞, –ø–µ—Ä–µ–¥–∞–Ω–Ω–æ–≥–æ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç ---
if [ -z "$1" ]; then
    echo "‚ùó –£–∫–∞–∂–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞ –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å–∫—Ä–∏–ø—Ç–∞."
    echo "‚ùó –ê—Ä–≥—É–º–µ–Ω—Ç (–∏–º—è —Ñ–∞–π–ª–∞) –Ω–µ –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω." >> "$REPORT"
else
    if [ -e "$1" ]; then
        echo "‚úÖ –§–∞–π–ª '$1' —Å—É—â–µ—Å—Ç–≤—É–µ—Ç."
        echo "‚úÖ –§–∞–π–ª '$1' —Å—É—â–µ—Å—Ç–≤—É–µ—Ç." >> "$REPORT"
    else
        echo "‚ùå –§–∞–π–ª '$1' –Ω–µ –Ω–∞–π–¥–µ–Ω."
        echo "‚ùå –§–∞–π–ª '$1' –Ω–µ –Ω–∞–π–¥–µ–Ω." >> "$REPORT"
    fi
fi
echo >> "$REPORT"
echo

# --- 3. –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –æ–±—ä–µ–∫—Ç–µ: –∏–º—è –∏ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ ---
echo "üîí –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –æ–±—ä–µ–∫—Ç–µ:"
echo "üîí –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–∞–∂–¥–æ–º –æ–±—ä–µ–∫—Ç–µ:" >> "$REPORT"

for item in *; do
    perms=$(ls -ld "$item" | awk '{print $1}')
    echo "$item ‚Äî –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞: $perms" | tee -a "$REPORT"
done

echo >> "$REPORT"
echo "‚úÖ –û—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω –≤ —Ñ–∞–π–ª–µ: $REPORT"
